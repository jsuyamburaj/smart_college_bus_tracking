{% extends 'base.html' %}
{% load static %}

{% block title %}Contact Us - Smart College Bus Tracking{% endblock %}

{% block extra_css %}
<style>
    .contact-card {
        border: none;
        border-radius: 15px;
        transition: transform 0.3s;
        height: 100%;
    }
    
    .contact-card:hover {
        transform: translateY(-5px);
    }
    
    .contact-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 20px;
        font-size: 24px;
    }
    
    .form-control, .form-select {
        border-radius: 10px;
        padding: 12px 15px;
        border: 1px solid #e1e5eb;
    }
    
    .form-control:focus, .form-select:focus {
        border-color: #4361ee;
        box-shadow: 0 0 0 0.2rem rgba(67, 97, 238, 0.25);
    }
</style>
{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <!-- Page Header -->
            <div class="text-center mb-5">
                <h1 class="display-5 fw-bold text-primary mb-3">Contact Us</h1>
                <p class="lead text-muted">
                    Get in touch with our team for support, inquiries, or feedback
                </p>
            </div>

            <div class="row g-4">
                <!-- Contact Information -->
                <div class="col-lg-4">
                    <div class="sticky-top" style="top: 20px;">
                        <div class="card contact-card shadow-sm border-0 mb-4">
                            <div class="card-body p-4">
                                <div class="contact-icon bg-primary text-white">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <h5 class="text-center fw-bold mb-3">Email Us</h5>
                                <p class="text-center text-muted mb-0">
                                    <a href="mailto:support@smartbustracking.edu" class="text-decoration-none">
                                        support@smartbustracking.edu
                                    </a>
                                </p>
                            </div>
                        </div>

                        <div class="card contact-card shadow-sm border-0 mb-4">
                            <div class="card-body p-4">
                                <div class="contact-icon bg-success text-white">
                                    <i class="fas fa-phone"></i>
                                </div>
                                <h5 class="text-center fw-bold mb-3">Call Us</h5>
                                <p class="text-center text-muted mb-0">
                                    <a href="tel:+15551234567" class="text-decoration-none">
                                        +1 (555) 123-4567
                                    </a>
                                </p>
                            </div>
                        </div>

                        <div class="card contact-card shadow-sm border-0">
                            <div class="card-body p-4">
                                <div class="contact-icon bg-info text-white">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <h5 class="text-center fw-bold mb-3">Visit Us</h5>
                                <p class="text-center text-muted mb-0">
                                    College Campus<br>
                                    123 University Drive<br>
                                    City, State 12345
                                </p>
                            </div>
                        </div>

                        <!-- Hours -->
                        <div class="mt-4 p-4 bg-light rounded">
                            <h6 class="fw-bold mb-3">Office Hours</h6>
                            <ul class="list-unstyled text-muted">
                                <li class="mb-2">
                                    <i class="fas fa-clock me-2"></i>
                                    Monday - Friday: 9:00 AM - 6:00 PM
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-clock me-2"></i>
                                    Saturday: 10:00 AM - 2:00 PM
                                </li>
                                <li>
                                    <i class="fas fa-clock me-2"></i>
                                    Sunday: Closed
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Contact Form -->
                <div class="col-lg-8">
                    <div class="card shadow-sm border-0">
                        <div class="card-body p-5">
                            <h3 class="fw-bold mb-4">Send us a Message</h3>
                            
                            <form id="contactForm" method="post" action="{% url 'contact' %}">
                                {% csrf_token %}
                                
                                <div class="row g-3 mb-4">
                                    <div class="col-md-6">
                                        <label for="name" class="form-label fw-bold">Full Name *</label>
                                        <input type="text" 
                                               class="form-control" 
                                               id="name" 
                                               name="name" 
                                               required
                                               placeholder="Enter your full name">
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <label for="email" class="form-label fw-bold">Email Address *</label>
                                        <input type="email" 
                                               class="form-control" 
                                               id="email" 
                                               name="email" 
                                               required
                                               placeholder="Enter your email">
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="subject" class="form-label fw-bold">Subject *</label>
                                    <select class="form-select" id="subject" name="subject" required>
                                        <option value="" selected disabled>Select a subject</option>
                                        <option value="general">General Inquiry</option>
                                        <option value="support">Technical Support</option>
                                        <option value="feedback">Feedback/Suggestions</option>
                                        <option value="partnership">Partnership Opportunities</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="message" class="form-label fw-bold">Message *</label>
                                    <textarea class="form-control" 
                                              id="message" 
                                              name="message" 
                                              rows="6" 
                                              required
                                              placeholder="Type your message here..."></textarea>
                                </div>
                                
                                <div class="mb-4">
                                    <div class="form-check">
                                        <input class="form-check-input" 
                                               type="checkbox" 
                                               id="newsletter" 
                                               name="newsletter">
                                        <label class="form-check-label text-muted" for="newsletter">
                                            Subscribe to our newsletter for updates and announcements
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-primary btn-lg">
                                        <i class="fas fa-paper-plane me-2"></i>Send Message
                                    </button>
                                </div>
                                
                                <div class="mt-3 text-center">
                                    <p class="text-muted small">
                                        * Required fields. We'll respond to your message within 24 hours.
                                    </p>
                                </div>
                            </form>
                            
                            <!-- Success Message (hidden by default) -->
                            <div id="successMessage" class="alert alert-success d-none mt-4" role="alert">
                                <i class="fas fa-check-circle me-2"></i>
                                Thank you for your message! We'll get back to you soon.
                            </div>
                        </div>
                    </div>
                    
                    <!-- FAQ Section -->
                    <div class="mt-5">
                        <h3 class="fw-bold mb-4">Frequently Asked Questions</h3>
                        
                        <div class="accordion" id="faqAccordion">
                            <div class="accordion-item border-0 mb-3">
                                <h2 class="accordion-header">
                                    <button class="accordion-button rounded" 
                                            type="button" 
                                            data-bs-toggle="collapse" 
                                            data-bs-target="#faq1">
                                        How do I register for the bus tracking service?
                                    </button>
                                </h2>
                                <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Students can register through their college portal. Parents and other users 
                                        can sign up on our website. College administrators will handle driver registrations.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion-item border-0 mb-3">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed rounded" 
                                            type="button" 
                                            data-bs-toggle="collapse" 
                                            data-bs-target="#faq2">
                                        Is there a mobile app available?
                                    </button>
                                </h2>
                                <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Yes! Our mobile app is available for both iOS and Android. You can download it 
                                        from the App Store or Google Play Store.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion-item border-0">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed rounded" 
                                            type="button" 
                                            data-bs-toggle="collapse" 
                                            data-bs-target="#faq3">
                                        How accurate is the real-time tracking?
                                    </button>
                                </h2>
                                <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Our tracking system uses GPS technology with an accuracy of up to 5 meters. 
                                        Location updates are sent every 10-30 seconds depending on network conditions.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const contactForm = document.getElementById('contactForm');
        const successMessage = document.getElementById('successMessage');
        
        if (contactForm) {
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Simple form validation
                const name = document.getElementById('name').value.trim();
                const email = document.getElementById('email').value.trim();
                const subject = document.getElementById('subject').value;
                const message = document.getElementById('message').value.trim();
                
                if (!name || !email || !subject || !message) {
                    alert('Please fill in all required fields.');
                    return;
                }
                
                // Email validation
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    alert('Please enter a valid email address.');
                    return;
                }
                
                // Show loading state
                const submitBtn = contactForm.querySelector('button[type="submit"]');
                const originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Sending...';
                submitBtn.disabled = true;
                
                // Simulate form submission (replace with actual AJAX call)
                setTimeout(() => {
                    // Hide form, show success message
                    contactForm.classList.add('d-none');
                    successMessage.classList.remove('d-none');
                    
                    // Reset form (optional)
                    contactForm.reset();
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }, 1500);
            });
        }
    });
</script>
{% endblock %}